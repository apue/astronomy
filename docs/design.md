# 金星凌日测距教学网站 - 设计文档

## 1. 系统架构设计

### 1.1 总体架构
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   用户界面层     │    │    业务逻辑层     │    │    数据层        │
│                │    │                 │    │                │
│ - 3D渲染界面    │◄──►│ - 天体运动计算   │◄──►│ - 天文数据       │
│ - 控制面板      │    │ - 视差计算       │    │ - 观测点数据     │
│ - 数据展示      │    │ - 时间管理       │    │ - 纹理资源       │
└─────────────────┘    └──────────────────┘    └─────────────────┘
```

### 1.2 模块设计

#### 1.2.1 核心模块
- **SceneManager**: 3D场景管理
- **CelestialBodies**: 天体对象管理
- **TimeController**: 时间轴控制
- **ObservationPoints**: 观测点管理
- **DataRecorder**: 数据记录与计算
- **UIController**: 用户界面控制

#### 1.2.2 工具模块
- **MathUtils**: 天文计算工具
- **TextureLoader**: 纹理加载管理
- **AnimationController**: 动画控制
- **EventHandler**: 事件处理

## 2. 界面设计

### 2.1 主界面布局
```
┌─────────────────────────────────────────────────────────────┐
│                        顶部导航栏                           │
├─────────────────────────────────────────────────────────────┤
│                                               │             │
│                                               │   控制面板   │
│               3D 场景区域                      │             │
│                                               │  - 时间轴   │
│                                               │  - 视角控制  │
│                                               │  - 设置选项  │
│                                               │             │
├─────────────────────────────────────────────────────────────┤
│                       底部信息栏                            │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 用户流程设计

#### 2.2.1 主要用户路径
1. **初始体验**：
   - 加载页面 → 3D太阳系概览 → 时间轴拖拽体验

2. **深入探索**：
   - 点击地球 → 选择观测点 → 望远镜视角 → 观察视差

3. **数据收集**：
   - 记录时间点 → 对比不同观测点 → 查看计算结果

4. **扩展学习**：
   - 查看历史背景 → 相关视频链接 → 其他测量方法

#### 2.2.2 交互状态设计
- **全局视角**：可旋转、缩放的3D场景
- **地球视角**：显示观测点分布
- **观测点视角**：望远镜圆形视野
- **数据分析视角**：图表和计算结果展示

## 3. 3D场景设计

### 3.1 天体建模

#### 3.1.1 太阳
- **几何体**：SphereGeometry (radius: 10 units)
- **纹理**：NASA SDO真实太阳表面图像
- **材质**：自发光材质，模拟太阳光
- **效果**：微妙的表面活动动画

#### 3.1.2 地球  
- **几何体**：SphereGeometry (radius: 1 unit)
- **纹理**：NASA Blue Marble高分辨率图像
- **附加**：云层纹理，日夜分界线
- **自转**：基于真实自转周期

#### 3.1.3 金星
- **几何体**：SphereGeometry (radius: 0.95 units)
- **纹理**：雷达穿透云层的表面纹理
- **轨道**：椭圆轨道动画

### 3.2 相机系统设计

#### 3.2.1 相机类型
- **OrbitControls**：主要的3D场景浏览
- **固定视角相机**：观测点望远镜视角
- **跟踪相机**：自动跟随金星运动

#### 3.2.2 视角切换
- 平滑的相机位置过渡动画
- 不同视角的UI适配
- 相机限制确保最佳观察角度

### 3.3 光照设计
- **环境光**：低强度全局照明
- **方向光**：模拟太阳光照
- **点光源**：太阳中心的强光源

## 4. 数据结构设计

### 4.1 天体数据结构
```javascript
class CelestialBody {
  constructor(name, radius, textureUrl, orbitData) {
    this.name = name;
    this.radius = radius;
    this.position = new Vector3();
    this.mesh = null;
    this.orbitData = orbitData;
  }
}
```

### 4.2 观测点数据结构
```javascript
class ObservationPoint {
  constructor(name, coordinates, year, observer) {
    this.name = name;
    this.latitude = coordinates.lat;
    this.longitude = coordinates.lng;
    this.year = year;
    this.observer = observer;
    this.recordedTimes = [];
  }
}
```

### 4.3 时间数据结构
```javascript
class TimeController {
  constructor(startDate, endDate) {
    this.currentTime = startDate;
    this.startTime = startDate;
    this.endTime = endDate;
    this.speed = 1; // 时间流速倍数
  }
}
```

## 5. 用户界面设计

### 5.1 控制面板设计
- **时间轴控制器**
  - 拖拽滑块控制时间
  - 播放/暂停按钮
  - 速度调节器
  - 关键时间点标记

- **视角控制器**
  - 预设视角按钮
  - 相机重置按钮
  - 跟随模式切换

- **数据面板**
  - 当前时间显示
  - 天体位置信息
  - 观测数据记录

### 5.2 信息展示设计
- **教学引导**
  - 步骤式教程
  - 交互提示
  - 概念解释弹窗

- **数据可视化**
  - 实时计算结果
  - 历史数据对比
  - 图表和图形展示

### 5.3 响应式设计
- **桌面端**：完整功能界面
- **平板端**：简化控制面板
- **移动端**：基础浏览功能

## 6. 视觉设计规范

### 6.1 色彩方案
- **主色调**：深蓝色 (#1a1a2e)
- **辅助色**：金黄色 (#ffd700)
- **强调色**：橙红色 (#ff6b6b)
- **文字色**：白色/浅灰色

### 6.2 字体规范
- **主字体**：Arial, sans-serif
- **代码字体**：Monaco, monospace
- **标题字体**：加粗，更大尺寸
- **正文字体**：常规，适中尺寸

### 6.3 动画设计
- **过渡动画**：200-300ms缓动
- **天体运动**：流畅的轨道动画
- **界面切换**：淡入淡出效果
- **交互反馈**：悬停和点击状态

## 7. 交互设计细节

### 7.1 3D场景交互
- **旋转**：鼠标左键拖拽
- **缩放**：鼠标滚轮
- **平移**：鼠标右键拖拽
- **选择**：点击天体对象

### 7.2 时间控制交互
- **时间轴拖拽**：精确时间选择
- **播放控制**：一键播放/暂停
- **关键点跳转**：快速定位重要时刻

### 7.3 数据记录交互
- **一键记录**：点击记录当前状态
- **数据对比**：并排显示不同观测点
- **结果计算**：自动计算并展示结果